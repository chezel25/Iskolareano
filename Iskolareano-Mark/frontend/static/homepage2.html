<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ISKOLAREALENO Scholarship Portal</title>
<link rel="stylesheet" href="./css/homepage2.css">


</head>
<body>
   
<header class="container" role="banner">
  <div class="logo" aria-label="Iskolarealeno logo and name">
    <img src="/iskolarealeno/frontend/img/logo.jpg" alt="Iskolarealeno Logo" />
    <span class="logo-text">ISKOLAREALE√ëO</span>
  </div>
  <nav role="navigation" aria-label="Main navigation">
    <ul>
      <li><a href="#home" tabindex="0">Home</a></li>
      <li><a href="#about" tabindex="0">About Us</a></li>
      <li><a href="#services" tabindex="0">Our Services</a></li>
      <li><a href="#news" tabindex="0">News</a></li>
      <li><a onclick="toggleProfile()">Profile</a></li>
    </ul>
  </nav>
</header>
 <div id="main">
<main class="container" role="main" aria-label="Main content">

  <!-- Hero Section --><section id="home"></section>
  <section class="hero" aria-label="Where Innovation Drives section">
    <div class="hero-left">
      <small>Award-Winning Scholarship Excellence</small>
      <h1>
        Where Innovation Drives <br />
        <span class="orange-text">Education Excellence</span>
      </h1>
      <div class="tags" aria-label="Areas of focus">
        <span>Scholarships</span>
        <span>Community Support</span>
        <span>Student Programs</span>
        <span>Educational Events</span>
        <span>Live Sessions</span>
      </div>
      <p>
        ISKOLAREALE√ëO empowers student scholars from Real, Quezon to succeed.
        Join us for scholarships, community programs, and events to help unlock your potential.
      </p>
    </div>
    <div class="hero-right" aria-label="Scholarship related image">
      <img src="/iskolarealeno/frontend/img/DOCU1.jpg" alt="Scholars in discussion with advisor" />
      <div class="hero-stats" aria-label="Statistics of ISKOLAREALE√ëO achievements">
        <div>
          <span>147+</span> Batch 1 Scholars
        </div>
        <div>
          <span>259+</span> Batch 2 Scholars
        </div>
        <div>
          <span>350+</span> Batch 3 Scholars
        </div>
      </div>
    </div>
  </section>

  <!-- ABOUT SECTION -->
   <section id="about"></section>
  <section class="crafting-section" aria-label="Crafting Excellence">
    <div class="craft-img">
      <img src="/iskolarealeno/frontend/img/DOCU2.jpg" alt="Scholarship officer handshake with student" />
      <div class="years-box">25+ Years of Experience</div>
    </div>
    <div class="craft-text">
      <h2><span class="orange-text">Crafting Excellence</span> in Every Scholarship</h2>
      <p>
        ISKOLAREALE√ëO has consistently provided excellent scholarship opportunities for deserving students in Real, Quezon.
        Our mission is to support and uplift scholars toward a successful future.
        <strong>Our Mission</strong> is to empower through education and community development.
      </p>
      <button aria-label="Learn more about our mission">Learn More ‚Üí</button>
    </div>
  </section>

  <!-- Services Section --><section id="services"></section>
  <section class="services-section" aria-label="Our Services">
    <div class="section-subtitle">Our Services</div>
    <h2 class="section-title">Services That Fit<br /><span class="orange-text">Your Scholarship Needs</span></h2>
    <p class="section-description">
      Explore the various programs and services designed to support student scholars in their academic journey.
    </p>

    <div class="services-list">
      <article class="service-card" tabindex="0" aria-labelledby="service1-title">
        <div class="service-icon" aria-hidden="true">üéì</div>
        <h3 id="service1-title" class="service-title">Scholarship Programs</h3>
        <p class="service-desc">
          Various scholarship programs tailored for Real, Quezon students aiming for academic excellence.
        </p>
        <a href="#" class="service-link" aria-label="Learn more about Scholarship Programs">Learn more ‚Üí</a>
      </article>

      <article class="service-card" tabindex="0" aria-labelledby="service2-title">
        <div class="service-icon" aria-hidden="true">üè´</div>
        <h3 id="service2-title" class="service-title">Community Support</h3>
        <p class="service-desc">
          Programs that develop community engagement and social involvement among scholars.
        </p>
        <a href="#" class="service-link" aria-label="Learn more about Community Support">Learn more ‚Üí</a>
      </article>

      <article class="service-card" tabindex="0" aria-labelledby="service3-title">
        <div class="service-icon" aria-hidden="true">üìö</div>
        <h3 id="service3-title" class="service-title">Academic Workshops</h3>
        <p class="service-desc">
          Workshops and sessions that help improve knowledge and skills for academic success.
        </p>
        <a href="#" class="service-link" aria-label="Learn more about Academic Workshops">Learn more ‚Üí</a>
      </article>
    </div>

    <button class="btn-view-all" aria-label="View all services">View All Services ‚Üí</button>
  </section>

<section id="news"></section>
<section class="news-section" aria-label="News and Event updates">
  <h3 class="news-header">News</h3>
  <div class="news-grid">

    <article class="news-card">
      <img src="/iskolarealeno/frontend/img/DOCU2.jpg" alt="Group meeting or event" />
      <h3>Announcements</h3>
<div id="announcements">...</div>
      <p>Our scholars participated in the Real town outreach program to help local communities.</p>
      <button>Read More</button>
    </article>

    <article class="news-card">
       <img src="/iskolarealeno/frontend/img/DOCU3.jpg" alt="Students standing outdoors" />
     
      <h3>Virtual Training Sessions Launched</h3>
      <p>Join our free online seminars designed to enhance students' skills and knowledge.</p>
      <button>Read More</button>
    </article>

    <article class="news-card join-now">
      <img src="/iskolarealeno/frontend/img/DOCU4.jpg" alt="Large gathering orientation" />
      <h3>JOIN NOW! Welcoming new scholars</h3>
      <p>Become part of the ISKOLAREALENO family and pursue your education with our full support.</p>
      <button>Apply Now</button>
    </article>
</main>
<div id="profile-panel">
  <h2>Update Profile</h2>

  <!-- Profile Picture Preview -->
  <div style="text-align:center; margin-bottom:15px;">
    <img id="profile-preview" src="/iskolarealeno/frontend/img/default-avatar.png" 
         alt="Profile Picture" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border:2px solid #ccc;">
  </div>

  <!-- Profile Picture Input -->
  <label for="profile-pic">Choose Profile Picture:</label><br>
  <input type="file" id="profile-pic" accept="image/*"><br><br>
  
 <!-- Display Name and Degree -->
  <p><strong>Name:</strong> <span id="scholar-name">Loading...</span></p>
  <p><strong>Degree:</strong> <span id="scholar-degree">Loading...</span></p>

  <!-- Add Semester -->
  <label for="semester">Semester:</label><br>
  <input type="text" id="semester" placeholder="e.g. 1st Semester"><br><br>

  <!-- Upload Grade File -->
  <label for="grade-file">Grade File:</label><br>
  <input type="file" id="grade-file" accept=".pdf,.doc,.docx,.xls,.xlsx"><br><br>

  <!-- Upload Journal -->
  <label for="journal">Journal:</label><br>
  <input type="file" id="journal" accept=".pdf,.doc,.docx,.txt"><br><br>

  <button onclick="updateProfile()">Update</button>
   <button><a href="BLUE ORANGE.html"> Logout</a></button>
  <p id="profile-msg" style="color:green;"></p>
</div>



  
</div>

<footer>
  &copy; 2024 ISKOLAREALE√ëO | Real, Quezon, Philippines | Contact: info@iskolarealeno.ph
</footer>



<script>
     function toggleProfile() {
    const panel = document.getElementById('profile-panel');
    panel.classList.toggle('active');
    if(panel.classList.contains('active')) loadProfile();
  }

  function loadProfile() {
    const scholar = JSON.parse(localStorage.getItem('scholar') || '{}');
    if(!scholar.scholar_id) {
      document.getElementById('profile-panel').innerHTML = '<p>Please login first. <a href="login.html">Login</a></p>';
      return;
    }
    document.getElementById('degree').value = scholar.degree || '';
  }

async function loadAnnouncements() {
  const res = await fetch('http://localhost:5000/api/announcements');
  const data = await res.json();
  if (!data || data.length === 0) {
    document.getElementById('announcements').innerHTML = "<p>No announcements yet.</p>";
    return;
  }
  let html = "<ul>";
  data.forEach(a => {
    html += `<li><b>${a.title}</b> (${a.date})<br>${a.content}</li><hr>`;
  });
  html += "</ul>";
  document.getElementById('announcements').innerHTML = html;
}

async function loadGraduates() {
  const res = await fetch('http://localhost:5000/api/graduates');
  const data = await res.json();
  if (!data || data.length === 0) {
    document.getElementById('graduates').innerHTML = "<p>No graduates yet.</p>";
    return;
  }
  let html = "";
  data.forEach(g => {
    html += `
      <div style="border:1px solid #ccc; padding:10px; margin:10px; border-radius:10px; width:300px;">
        <img src="http://localhost:5000/uploads/${g.photo}" width="100" style="border-radius:50%;"><br>
        <b>${g.name}</b><br>
        <small>${g.degree} (${g.year})</small><br>
        <i>"${g.message}"</i>
      </div>`;
  });
  document.getElementById('graduates').innerHTML = html;
}

loadAnnouncements();
loadGraduates();
const scholarprofile = JSON.parse(localStorage.getItem('scholar') || '{}');
if(!scholar.scholar_id) {
  document.getElementById('profile-panel').innerHTML = '<p>Please login first. <a href="login.html">Login</a></p>';
}


//PROFILE FEATURES

const scholar = JSON.parse(localStorage.getItem('scholar') || '{}');

// If not logged in
if(!scholar.scholar_id) {
  document.getElementById('profile-panel').innerHTML = '<p>Please login first. <a href="login.html">Login</a></p>';
}

// Preview profile picture on file select
document.getElementById('profile-pic').addEventListener('change', function() {
  const file = this.files[0];
  if(file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      document.getElementById('profile-preview').src = e.target.result;
    }
    reader.readAsDataURL(file);
  }
});

async function updateProfile() {
  const degree = document.getElementById('degree').value;
  const picFile = document.getElementById('profile-pic').files[0];

  const formData = new FormData();
  formData.append('scholar_id', scholar.scholar_id);
  formData.append('degree', degree);
  if(picFile) formData.append('profile_pic', picFile);

  try {
    const res = await fetch('http://localhost:5000/api/profile', {
      method: 'POST',
      body: formData
    });
    const text = await res.text();
    document.getElementById('profile-msg').textContent = text;

    // Optionally save uploaded picture locally
    if(picFile) {
      const reader = new FileReader();
      reader.onload = e => localStorage.setItem('profile_pic', e.target.result);
      reader.readAsDataURL(picFile);
    }

  } catch (err) {
    console.error(err);
    document.getElementById('profile-msg').textContent = "Update failed. Try again.";
  }
}

// Load existing profile picture from localStorage if available
const savedPic = localStorage.getItem('profile_pic');
if(savedPic) {
  document.getElementById('profile-preview').src = savedPic;
}
// Fetch scholar info from backend
async function loadProfile() {
  try {
    const res = await fetch(`http://localhost:5000/api/scholar/${scholar.scholar_id}`);
    const data = await res.json();

    if(data) {
      scholar = {...scholar, ...data}; // merge with localStorage object
      localStorage.setItem('scholar', JSON.stringify(scholar));

      document.getElementById('scholar-name').textContent = scholar.name || '';
      document.getElementById('scholar-degree').textContent = scholar.degree || '';
    }
  } catch(err) {
    console.error(err);
    document.getElementById('scholar-name').textContent = "Error loading";
    document.getElementById('scholar-degree').textContent = "Error loading";
  }
}

async function updateProfile() {
  const semester = document.getElementById('semester').value;
  const gradeFile = document.getElementById('grade-file').files[0];
  const journal = document.getElementById('journal').files[0];

  const formData = new FormData();
  formData.append('scholar_id', scholar.scholar_id);
  formData.append('semester', semester);
  if(gradeFile) formData.append('grade_file', gradeFile);
  if(journal) formData.append('journal', journal);

  try {
    const res = await fetch('http://localhost:5000/api/profile/update', {
      method: 'POST',
      body: formData
    });
    const text = await res.text();
    document.getElementById('profile-msg').textContent = text;
  } catch(err) {
    console.error(err);
    document.getElementById('profile-msg').textContent = "Update failed. Try again.";
  }
}

</script>
</body>
</html>
