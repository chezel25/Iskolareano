<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Reset Password</title>
<link rel="stylesheet" href="/css/forgot-password.css">

</head>
<body>
  <div class="forgot-wrapper">
    <div class="forgot-card">

      <!-- LOGO -->
      <img src="/img/logo.png" class="portal-logo" alt="Logo">

      <!-- TITLE -->
      <h1>Reset Password</h1>
      <p class="description">Enter your new password below</p>

      <!-- INPUT -->
      <div class="input-group">
        <input
          type="password"
          id="newPassword"
          placeholder="Enter new password"
        >
      </div>

      <!-- BUTTON -->
      <button class="btn" onclick="resetPassword()">
        Reset Password
      </button>

      <!-- LINK -->
      <div class="footer-text">
        <a href="admin-login.html">← Back to Login</a>
      </div>

    </div>
  </div>

<script>
async function resetPassword() {
  const newPassword = document.getElementById('newPassword').value.trim();
  if (!newPassword) { alert('Enter a new password'); return; }

  // Get token from URL
  const params = new URLSearchParams(window.location.search);
  const token = params.get('token');
  if (!token) { alert('Missing token'); return; }

  const res = await fetch('http://localhost:5000/api/admin/reset-password', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify({ token, newPassword })
  });

  const data = await res.json();
  if (res.ok) {
    alert(data.message);
    window.location.href = 'admin-login.html';
  } else alert('❌ ' + data.error);
}
</script>

</body>
</html>
